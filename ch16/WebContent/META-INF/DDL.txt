/* 회원  */
CREATE TABLE MY_SCHEMA.MEMBER (
	ID VARCHAR2(30) NOT NULL, /* 회원아이디 */
	IDX NUMBER(20), /* 순번 */
	PASSWORD VARCHAR2(30), /* 비밀번호 */
	EMAIL VARCHAR2(30), /* 이메일 */
	NICKNAME VARCHAR2(30), /* 닉네임 */
	GENDER VARCHAR2(30), /* 성별 */
	REG_DATE VARCHAR2(30), /* 가입일 */
	DEL_YN VARCHAR2(30), /* 탈퇴여부 */
	STATUS VARCHAR2(30) /* 회원상태 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_MEMBER
	ON MY_SCHEMA.MEMBER (
		ID ASC
	);

ALTER TABLE MY_SCHEMA.MEMBER
	ADD
		CONSTRAINT PK_MEMBER
		PRIMARY KEY (
			ID
		);

COMMENT ON TABLE MY_SCHEMA.MEMBER IS '회원 ';

COMMENT ON COLUMN MY_SCHEMA.MEMBER.ID IS '회원아이디';

COMMENT ON COLUMN MY_SCHEMA.MEMBER.IDX IS '순번';

COMMENT ON COLUMN MY_SCHEMA.MEMBER.PASSWORD IS '비밀번호';

COMMENT ON COLUMN MY_SCHEMA.MEMBER.EMAIL IS '이메일';

COMMENT ON COLUMN MY_SCHEMA.MEMBER.NICKNAME IS '닉네임';

COMMENT ON COLUMN MY_SCHEMA.MEMBER.GENDER IS '성별';

COMMENT ON COLUMN MY_SCHEMA.MEMBER.REG_DATE IS '가입일';

COMMENT ON COLUMN MY_SCHEMA.MEMBER.DEL_YN IS '탈퇴여부';

COMMENT ON COLUMN MY_SCHEMA.MEMBER.STATUS IS '회원상태';

/* 설문조사 게시판 */
CREATE TABLE MY_SCHEMA.SUR (
	S_IDX VARCHAR2(100) NOT NULL, /* 설문번호 */
	S_SUB VARCHAR2(50), /* 제목 */
	S_SDATE DATE, /* 시작일 */
	S_EDATE DATE, /* 종료일 */
	S_CONTENT VARCHAR2(2000), /* 소개글 */
	S_OP1 VARCHAR2(50), /* 항목1 */
	S_OP2 VARCHAR2(50), /* 항목2 */
	S_OP3 VARCHAR2(50), /* 항목3 */
	S_OP4 VARCHAR2(50), /* 항목4 */
	S_OP5 VARCHAR2(50), /* 항목5 */
	ID VARCHAR2(30) /* 관리자아이디 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_SUR
	ON MY_SCHEMA.SUR (
		S_IDX ASC
	);

ALTER TABLE MY_SCHEMA.SUR
	ADD
		CONSTRAINT PK_SUR
		PRIMARY KEY (
			S_IDX
		);

COMMENT ON TABLE MY_SCHEMA.SUR IS '설문조사 게시판';

COMMENT ON COLUMN MY_SCHEMA.SUR.S_IDX IS '설문번호';

COMMENT ON COLUMN MY_SCHEMA.SUR.S_SUB IS '제목';

COMMENT ON COLUMN MY_SCHEMA.SUR.S_SDATE IS '시작일';

COMMENT ON COLUMN MY_SCHEMA.SUR.S_EDATE IS '종료일';

COMMENT ON COLUMN MY_SCHEMA.SUR.S_CONTENT IS '소개글';

COMMENT ON COLUMN MY_SCHEMA.SUR.S_OP1 IS '항목1';

COMMENT ON COLUMN MY_SCHEMA.SUR.S_OP2 IS '항목2';

COMMENT ON COLUMN MY_SCHEMA.SUR.S_OP3 IS '항목3';

COMMENT ON COLUMN MY_SCHEMA.SUR.S_OP4 IS '항목4';

COMMENT ON COLUMN MY_SCHEMA.SUR.S_OP5 IS '항목5';

COMMENT ON COLUMN MY_SCHEMA.SUR.ID IS '관리자아이디';

/* 영화정보 */
CREATE TABLE MY_SCHEMA.MOVIE_INFO (
	M_IDX NUMBER NOT NULL, /* 영화번호 */
	M_NAME VARCHAR2(50) NOT NULL, /* 영화이름 */
	M_GENRE VARCHAR2(20), /* 영화장르 */
	M_DATE DATE, /* 영화개봉일 */
	M_NATION VARCHAR2(20), /* 영화국적 */
	M_TIME NUMBER(3) NOT NULL, /* 상영시간 */
	M_RATE VARCHAR2(20), /* 등급 */
	M_STORY VARCHAR2(4000), /* 줄거리 */
	M_CAST VARCHAR2(20), /* 출연진 */
	M_DIRECTOR VARCHAR2(20), /* 영화감독 */
	M_PHOTO VARCHAR2(2000), /* 포토 */
	M_VIDEO VARCHAR2(2000), /* 동영상 */
	M_POSTER VARCHAR2(2000) NOT NULL, /* 포스터 */
	ID VARCHAR2(30) /* 관리자아이디 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_MOVIE_INFO
	ON MY_SCHEMA.MOVIE_INFO (
		M_IDX ASC
	);

ALTER TABLE MY_SCHEMA.MOVIE_INFO
	ADD
		CONSTRAINT PK_MOVIE_INFO
		PRIMARY KEY (
			M_IDX
		);

COMMENT ON TABLE MY_SCHEMA.MOVIE_INFO IS '영화정보';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.M_IDX IS '영화번호';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.M_NAME IS '영화이름';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.M_GENRE IS '영화장르';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.M_DATE IS '영화개봉일';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.M_NATION IS '영화국적';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.M_TIME IS '상영시간';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.M_RATE IS '등급';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.M_STORY IS '줄거리';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.M_CAST IS '출연진';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.M_DIRECTOR IS '영화감독';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.M_PHOTO IS '포토';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.M_VIDEO IS '동영상';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.M_POSTER IS '포스터';

COMMENT ON COLUMN MY_SCHEMA.MOVIE_INFO.ID IS '관리자아이디';

/* 즐겨찾기-찜하기 */
CREATE TABLE MY_SCHEMA.BOOK_MIND (
	ID VARCHAR2(30) NOT NULL, /* 회원아이디 */
	M_IDX NUMBER NOT NULL, /* 영화번호 */
	IDX NUMBER NOT NULL, /* 순번 */
	MIND VARCHAR2(20), /* 찜한 영화 */
	REG_DATE DATE /* 등록날짜 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_BOOK_MIND
	ON MY_SCHEMA.BOOK_MIND (
		ID ASC,
		M_IDX ASC
	);

ALTER TABLE MY_SCHEMA.BOOK_MIND
	ADD
		CONSTRAINT PK_BOOK_MIND
		PRIMARY KEY (
			ID,
			M_IDX
		);

COMMENT ON TABLE MY_SCHEMA.BOOK_MIND IS '즐겨찾기-찜하기';

COMMENT ON COLUMN MY_SCHEMA.BOOK_MIND.ID IS '회원아이디';

COMMENT ON COLUMN MY_SCHEMA.BOOK_MIND.M_IDX IS '영화번호';

COMMENT ON COLUMN MY_SCHEMA.BOOK_MIND.IDX IS '순번';

COMMENT ON COLUMN MY_SCHEMA.BOOK_MIND.MIND IS '찜한 영화';

COMMENT ON COLUMN MY_SCHEMA.BOOK_MIND.REG_DATE IS '등록날짜';

/* 댓글 */
CREATE TABLE MY_SCHEMA.COMM (
	C_IDX NUMBER NOT NULL, /* 댓글번호 */
	ID VARCHAR2(30), /* 회원아이디 */
	C_CONTENT VARCHAR2(4000), /* 댓글내용 */
	C_SYMPATHY NUMBER, /* 공감수 */
	C_UNSYMPATHY NUMBER, /* 비공감수 */
	C_GRADE NUMBER, /* 평점 */
	C_DATE DATE, /* 작성일자 */
	DEL_YN VARCHAR2(2), /* 삭제여부 */
	M_IDX NUMBER, /* 영화번호 */
	STEP NUMBER, /* 스탭 */
	DEP NUMBER /* 깊이 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_COMM
	ON MY_SCHEMA.COMM (
		C_IDX ASC
	);

ALTER TABLE MY_SCHEMA.COMM
	ADD
		CONSTRAINT PK_COMM
		PRIMARY KEY (
			C_IDX
		);

COMMENT ON TABLE MY_SCHEMA.COMM IS '댓글';

COMMENT ON COLUMN MY_SCHEMA.COMM.C_IDX IS '댓글번호';

COMMENT ON COLUMN MY_SCHEMA.COMM.ID IS '회원아이디';

COMMENT ON COLUMN MY_SCHEMA.COMM.C_CONTENT IS '댓글내용';

COMMENT ON COLUMN MY_SCHEMA.COMM.C_SYMPATHY IS '공감수';

COMMENT ON COLUMN MY_SCHEMA.COMM.C_UNSYMPATHY IS '비공감수';

COMMENT ON COLUMN MY_SCHEMA.COMM.C_GRADE IS '평점';

COMMENT ON COLUMN MY_SCHEMA.COMM.C_DATE IS '작성일자';

COMMENT ON COLUMN MY_SCHEMA.COMM.DEL_YN IS '삭제여부';

COMMENT ON COLUMN MY_SCHEMA.COMM.M_IDX IS '영화번호';

COMMENT ON COLUMN MY_SCHEMA.COMM.STEP IS '스탭';

COMMENT ON COLUMN MY_SCHEMA.COMM.DEP IS '깊이';

/* 리뷰게시판 */
CREATE TABLE MY_SCHEMA.REVIEW (
	P_IDX NUMBER NOT NULL, /* 게시글 번호 */
	P_TITLE VARCHAR2(20), /* 제목 */
	P_CONTENT VARCHAR2(500), /* 내용 */
	P_DATE DATE, /* 작성일자 */
	ID VARCHAR2(30), /* 관리자아이디 */
	M_IDX NUMBER /* 영화번호 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_REVIEW
	ON MY_SCHEMA.REVIEW (
		P_IDX ASC
	);

ALTER TABLE MY_SCHEMA.REVIEW
	ADD
		CONSTRAINT PK_REVIEW
		PRIMARY KEY (
			P_IDX
		);

COMMENT ON TABLE MY_SCHEMA.REVIEW IS '리뷰게시판';

COMMENT ON COLUMN MY_SCHEMA.REVIEW.P_IDX IS '게시글 번호';

COMMENT ON COLUMN MY_SCHEMA.REVIEW.P_TITLE IS '제목';

COMMENT ON COLUMN MY_SCHEMA.REVIEW.P_CONTENT IS '내용';

COMMENT ON COLUMN MY_SCHEMA.REVIEW.P_DATE IS '작성일자';

COMMENT ON COLUMN MY_SCHEMA.REVIEW.ID IS '관리자아이디';

COMMENT ON COLUMN MY_SCHEMA.REVIEW.M_IDX IS '영화번호';

/* 설문응답 */
CREATE TABLE MY_SCHEMA.S_COMM (
	R_IDX NUMBER NOT NULL, /* 응답번호 */
	S_IDX NUMBER NOT NULL, /* 설문번호 */
	ID VARCHAR2(30) NOT NULL, /* 회원아이디 */
	R_OP VARCHAR2(50), /* 투표항목 */
	R_CONTENT VARCHAR2(4000), /* 내용 */
	R_REGDATE DATE, /* 작성일자 */
	S_IDX2 VARCHAR2(100) /* 설문번호2 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_S_COMM
	ON MY_SCHEMA.S_COMM (
		S_IDX ASC,
		ID ASC
	);

ALTER TABLE MY_SCHEMA.S_COMM
	ADD
		CONSTRAINT PK_S_COMM
		PRIMARY KEY (
			S_IDX,
			ID
		);

COMMENT ON TABLE MY_SCHEMA.S_COMM IS '설문응답';

COMMENT ON COLUMN MY_SCHEMA.S_COMM.R_IDX IS '응답번호';

COMMENT ON COLUMN MY_SCHEMA.S_COMM.S_IDX IS '설문번호';

COMMENT ON COLUMN MY_SCHEMA.S_COMM.ID IS '회원아이디';

COMMENT ON COLUMN MY_SCHEMA.S_COMM.R_OP IS '투표항목';

COMMENT ON COLUMN MY_SCHEMA.S_COMM.R_CONTENT IS '내용';

COMMENT ON COLUMN MY_SCHEMA.S_COMM.R_REGDATE IS '작성일자';

COMMENT ON COLUMN MY_SCHEMA.S_COMM.S_IDX2 IS '설문번호2';

ALTER TABLE MY_SCHEMA.SUR
	ADD
		CONSTRAINT FK_MEMBER_TO_SUR
		FOREIGN KEY (
			ID
		)
		REFERENCES MY_SCHEMA.MEMBER (
			ID
		);

ALTER TABLE MY_SCHEMA.MOVIE_INFO
	ADD
		CONSTRAINT FK_MEMBER_TO_MOVIE_INFO
		FOREIGN KEY (
			ID
		)
		REFERENCES MY_SCHEMA.MEMBER (
			ID
		);

ALTER TABLE MY_SCHEMA.BOOK_MIND
	ADD
		CONSTRAINT FK_MOVIE_INFO_TO_BOOK_MIND
		FOREIGN KEY (
			M_IDX
		)
		REFERENCES MY_SCHEMA.MOVIE_INFO (
			M_IDX
		);

ALTER TABLE MY_SCHEMA.BOOK_MIND
	ADD
		CONSTRAINT FK_MEMBER_TO_BOOK_MIND
		FOREIGN KEY (
			ID
		)
		REFERENCES MY_SCHEMA.MEMBER (
			ID
		);

ALTER TABLE MY_SCHEMA.COMM
	ADD
		CONSTRAINT FK_MOVIE_INFO_TO_COMM
		FOREIGN KEY (
			M_IDX
		)
		REFERENCES MY_SCHEMA.MOVIE_INFO (
			M_IDX
		);

ALTER TABLE MY_SCHEMA.COMM
	ADD
		CONSTRAINT FK_MEMBER_TO_COMM
		FOREIGN KEY (
			ID
		)
		REFERENCES MY_SCHEMA.MEMBER (
			ID
		);

ALTER TABLE MY_SCHEMA.REVIEW
	ADD
		CONSTRAINT FK_MEMBER_TO_REVIEW
		FOREIGN KEY (
			ID
		)
		REFERENCES MY_SCHEMA.MEMBER (
			ID
		);

ALTER TABLE MY_SCHEMA.REVIEW
	ADD
		CONSTRAINT FK_MOVIE_INFO_TO_REVIEW
		FOREIGN KEY (
			M_IDX
		)
		REFERENCES MY_SCHEMA.MOVIE_INFO (
			M_IDX
		);

ALTER TABLE MY_SCHEMA.S_COMM
	ADD
		CONSTRAINT FK_SUR_TO_S_COMM
		FOREIGN KEY (
			S_IDX2
		)
		REFERENCES MY_SCHEMA.SUR (
			S_IDX
		);

